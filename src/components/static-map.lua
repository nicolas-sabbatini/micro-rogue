local map_string = [[
#################################
#...............................#
#..##...........................#
#..##...............#...........#
#...................##..........#
#.....####...........#..........#
#.....#..#...........##.........#
#..#..#..#............###.......#
#.....####...........#####......#
#...............................#
#................###......##....#
#................###.....##.....#
#................###....###.....#
#...##...................#......#
#...####....#...................#
#....##....###........###.......#
#...........#..........##.......#
#....................####.......#
#...............................#
#...............................#
#...............................#
#################################
]]

local map = { size = { 0, 0 }, cels = {} }

do -- Generate map from ascii
	local width = #map_string:match("[^\n]+")
	local x = 0
	local y = 0
	for row in map_string:gmatch("[^\n]+") do
		map.cels[y] = {}
		for char in row:gmatch(".") do
			map.cels[y][x] = {}
			if char == "#" then
				map.cels[y][x].type = "wall"
			elseif char == "A" then
				map.cels[y][x].type = "arch"
			elseif char == "T" then
				map.cels[y][x].type = "trap"
			else
				map.cels[y][x].type = "floor"
			end
			x = x + 1
		end
		print(row)
		x = 0
		y = y + 1
	end
	print(width, y)
	map.size = { width - 1, y - 1 }
end

return map

